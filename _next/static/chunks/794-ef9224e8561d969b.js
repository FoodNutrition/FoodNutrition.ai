"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[794],{630:(e,t,r)=>{r.d(t,{r:()=>s});var a=r(1652),n=r(7437);function s(e){let{messages:t,isLoading:r,headerHeight:s}=e;return t?(0,n.jsxs)(n.Fragment,{children:[t.map((e,t)=>{var r,o,l,c;return(0,n.jsx)("div",{className:"group",id:"message-".concat(t),style:{scrollMarginTop:"".concat(s+10,"px")},children:"user"===e.role?(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsxs)("div",{className:"max-w-[80%]",children:[(0,n.jsx)("div",{className:"break-words whitespace-normal bg-gray-100 rounded-2xl px-4 py-3 text-gray-900",children:null!==(r=null==e||null===(o=e.parts)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.text)&&void 0!==r?r:""}),(0,n.jsx)("div",{className:"text-xs text-gray-500 mt-1 text-right",children:new Date(e.timestamp).toLocaleTimeString()})]})}):(0,n.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,n.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-white text-sm font-medium",children:"AI"})}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("div",{className:"break-words whitespace-normal bg-white rounded-2xl px-1 py-1 text-gray-900",children:(0,n.jsx)(a.UG,{children:null!==(l=null==e||null===(c=e.parts)||void 0===c||null===(c=c[0])||void 0===c?void 0:c.text.replace(/Current score:\s*\d+/,""))&&void 0!==l?l:""})}),(0,n.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:new Date(e.timestamp).toLocaleTimeString()})]})]})},t)}),r&&(0,n.jsx)("div",{className:"group",children:(0,n.jsxs)("div",{className:"flex items-start space-x-3 animate-pulse",children:[(0,n.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-white text-sm font-medium",children:"AI"})}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("div",{className:"break-words whitespace-normal bg-white borderrounded-2xl px-4 py-3 text-gray-900",children:(0,n.jsxs)("div",{className:"flex space-x-1",children:[(0,n.jsx)("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-75"}),(0,n.jsx)("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-150"}),(0,n.jsx)("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-300"})]})}),(0,n.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Thinking..."})]})]})})]}):null}},9285:(e,t,r)=>{r.d(t,{B:()=>f});var a=r(175),n=r(4853),s=r(2929),o=r(9328),l=r(7227);let c=(e,t)=>{let r=(0,s.D)({start:(0,o.z)((0,l.k)(e,t),{weekStartsOn:1}),end:e}),a=[];for(let e=0;e<r.length;e+=7){let t=r.slice(e,e+7);for(;t.length<7;)t.push(new Date(NaN));a.push(t)}return a};var i=r(7431),d=r(2875),u=r(2025),g=r(7437);function m(e){let{showLabel:t,spaceY:r,dotSize:a}=e;return t?(0,g.jsxs)("div",{className:"flex flex-col ".concat(r," sticky left-0 bg-white z-30 text-xs pr-3 mr-2"),children:[(0,g.jsx)("div",{className:"h-4"}),(0,g.jsx)("div",{className:"".concat(a),children:"Mon"}),(0,g.jsx)("div",{className:"".concat(a)}),(0,g.jsx)("div",{className:"".concat(a),children:"Wed"}),(0,g.jsx)("div",{className:"".concat(a)}),(0,g.jsx)("div",{className:"".concat(a),children:"Fri"}),(0,g.jsx)("div",{className:"".concat(a)}),(0,g.jsx)("div",{className:"".concat(a),children:"Sun"})]}):null}var h=r(3124),p=r(2265);function v(e){let{showLabel:t,week:r}=e,a=(0,p.useMemo)(()=>r.some(e=>1===(0,h._)(e)),[r]),n=(0,p.useMemo)(()=>{if(!a)return;let e=r.find(e=>1===(0,h._)(e));if(e)return(0,u.WU)(e,"MMMM")},[a,r]);return t?(0,g.jsx)("span",{className:"text-sm h-4 w-2",children:n}):null}function f(e){let{simpleColors:t=!0,selectedDate:r,maxDays:s=243,size:o="sm",showLabel:l=!1,onDateClick:h}=e,{data:p}=(0,d.a)(),f=(0,a._)(),y=c(f,s),b="sm"===o?"space-y-0.5":"space-y-1",x="sm"===o?"w-1.5 h-1.5":"w-4 h-4",j="sm"===o?"rounded-sm":"rounded",w=(e,r)=>t?(0,n.z)(r):(0,n.G)(f,e,r);return(0,g.jsxs)("div",{className:"flex ".concat("sm"===o?"space-x-0.5":"space-x-1"," pr-2 flex-1 w-full justify-start xl:justify-center"),children:[(0,g.jsx)(m,{showLabel:l,spaceY:b,dotSize:x}),y.map((e,t)=>(0,g.jsxs)("div",{className:"flex flex-col ".concat(b),children:[(0,g.jsx)(v,{showLabel:l,week:e}),e.map((e,t)=>{var a,n;if(isNaN(e.getTime()))return(0,g.jsx)("div",{className:"".concat(x," ").concat(j," bg-transparent")},t);let s=(0,u.WU)(e,"yyyy-MM-dd"),o=r&&(0,u.WU)(r,"yyyy-MM-dd")===s;return(0,g.jsx)("div",{title:s,onClick:()=>null==h?void 0:h(s),"data-date":s,className:(0,i.cn)((0,i.cn)((0,i.cn)("".concat(x," ").concat(j),w(s,null!==(a=null===(n=p[s])||void 0===n?void 0:n.rate)&&void 0!==a?a:0)),h?" cursor-pointer":""),o?"ring-2 ring-blue-500":"")},t)})]},t))]})}},6113:(e,t,r)=>{r.d(t,{z:()=>m});var a=r(665),n=r(2469),s=r(2265),o=r(4131),l=r(9662),c=r(7431),i=r(7437);let d=["className","variant","size","asChild"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}let g=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",custom:""},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),m=s.forwardRef((e,t)=>{let{className:r,variant:s,size:l,asChild:m=!1}=e,h=(0,n.Z)(e,d),p=m?o.g7:"button";return(0,i.jsx)(p,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({className:(0,c.cn)(g({variant:s,size:l,className:r})),ref:t},h))});m.displayName="Button"},175:(e,t,r)=>{r.d(t,{_:()=>s});var a=r(1182),n=r(2265);function s(){let{0:e,1:t}=(0,n.useState)(()=>new Date),r=(0,n.useRef)(e);return(0,n.useEffect)(()=>{let e=setInterval(()=>{let e=new Date;(0,a.K)(e,r.current)||(r.current=e,t(e))},3e4);return()=>clearInterval(e)},[]),e}},1545:(e,t,r)=>{r.d(t,{Z:()=>o});var a=r(6975),n=r(1083);let s=a.Z.create({baseURL:"https://foodnutrition-ai-backend.vercel.app/",headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{let t=localStorage.getItem(n.Wx);return t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t)),e}),s.interceptors.response.use(e=>e,async e=>{var t;let r=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!r._retry){r._retry=!0;try{let e=localStorage.getItem(n.w4);if(!e)throw Error("No refresh token available");let{accessToken:t,refreshToken:o}=(await a.Z.post("".concat("https://foodnutrition-ai-backend.vercel.app/","/auth/refresh"),{refreshToken:e})).data;return localStorage.setItem(n.Wx,t),localStorage.setItem(n.w4,o),s.defaults.headers.Authorization="Bearer ".concat(t),r.headers&&(r.headers.Authorization="Bearer ".concat(t)),s(r)}catch(e){return localStorage.removeItem(n.Wx),localStorage.removeItem(n.w4),Promise.reject(e)}}return Promise.reject(e)});let o=s},4853:(e,t,r)=>{r.d(t,{G:()=>l,z:()=>o});var a=r(8807),n=r(8656),s=r(8490);let o=e=>0===e?"bg-gray-200 ":e<=25?"bg-red-200":e<=50?"bg-orange-200":e<=75?"bg-yellow-200":e<=90?"bg-green-200":"bg-green-400",l=(e,t,r)=>{let o=(0,a.Qc)(t,"yyyy-MM-dd",new Date),l=(0,n.S)(o)===(0,n.S)(e)&&(0,s.j)(o)===(0,s.j)(e)?"":" opacity-60";return 0===r?"bg-gray-200 hover:bg-gray-300 border border-gray-300".concat(l):r<=25?"bg-red-200 hover:bg-red-300 border border-red-300".concat(l):r<=50?"bg-orange-200 hover:bg-orange-300 border border-orange-300".concat(l):r<=75?"bg-yellow-200 hover:bg-yellow-300 border border-yellow-300".concat(l):r<=90?"bg-green-200 hover:bg-green-300 border border-green-300".concat(l):"bg-green-400 hover:bg-green-500 border border-green-500".concat(l)}},7431:(e,t,r)=>{r.d(t,{cn:()=>s});var a=r(7214),n=r(465);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}},1083:(e,t,r)=>{r.d(t,{Wx:()=>u,tN:()=>m,w4:()=>g});var a=r(665),n=r(6975),s=r(6507),o=r(3388),l=r(3303),c=r(1545);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let u="accessToken",g="refreshToken",m=(0,l.U)((0,o.mW)((e,t)=>({user:{email:"",featureSet:"",consent:[]},accessToken:null,refreshToken:null,authenticated:null,loadToken:async()=>{let e=localStorage.getItem(u),r=localStorage.getItem(g);if(e&&r)return t().loadUser(e,r,!1);t().onLogout()},loadUser:async(r,a,n)=>{let o=d({},t().user);try{let e=(0,s.o)(r);e.email&&(o.email=e.email),e.featureSet&&(o.featureSet=e.featureSet),e.consent&&(o.consent=e.consent)}catch(e){console.log(e)}c.Z.defaults.headers.common.Authorization="Bearer ".concat(r),e({user:d({},o),accessToken:r,refreshToken:a,authenticated:!0}),n&&(localStorage.setItem(u,r),localStorage.setItem(g,a))},onRegister:async(e,t,r,a)=>{try{let n={consent:e};if(t&&r)n=d({email:t,password:r},n);else{if(!a)return{error:!0,msg:"Please provide credentials"};n=d({ssoToken:a},n)}return await c.Z.post("authentication/register",n)}catch(e){var n,s;return{error:!0,msg:null!==(n=null==e||null===(s=e.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.message)&&void 0!==n?n:"No Internet Connection"}}},onLogin:async(e,r)=>{try{let a=await c.Z.post("authentication/login",{email:e,password:r}),{accessToken:n,refreshToken:s}=a.data;return t().loadUser(n,s,!0),a}catch(e){var a,n;return{error:!0,msg:null!==(a=null==e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)&&void 0!==a?a:"No Internet Connection"}}},onLogout:async()=>{localStorage.removeItem(u),localStorage.removeItem(g),n.Z.defaults.headers.common.Authorization="",e({accessToken:null,refreshToken:null,authenticated:!1})}})))},2875:(e,t,r)=>{r.d(t,{m:()=>h,a:()=>m});var a=r(2469),n=r(665),s=r(3303),o=r(2025),l=r(1602);let c=e=>{let t=e.match(/Current score:\s*(\d+)/);return t?parseInt(t[1],10):50};var i=r(1545);let d=["timestamp"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let m=(0,s.U)((e,t)=>({data:{},isLoaded:!1,loadData:async()=>{let t={};try{t=(await i.Z.get("chat/history")).data}catch(e){}t?e({data:t,isLoaded:!0}):e({isLoaded:!0})},addMessage:(r,a)=>{var n,s,i,d;let u=(0,o.WU)(r,"yyyy-MM-dd"),m=t().data,h=[...null!==(n=null===(s=m[u])||void 0===s?void 0:s.messages)&&void 0!==n?n:[],a],p=g(g({},m),{},{[u]:{messages:h,rate:1}});if("model"===a.role){let e=c(null!==(i=null==a||null===(d=a.parts)||void 0===d||null===(d=d[0])||void 0===d?void 0:d.text)&&void 0!==i?i:"");p[u].rate=e}e({data:p}),localStorage.setItem("stock",l.DS.encode(JSON.stringify(p)))},getHistory:()=>Object.entries(t().data).map(e=>e[1].messages).flat().map(e=>{let{timestamp:t}=e;return g({},(0,a.Z)(e,d))})})),h=(e,t)=>e[(0,o.WU)(t,"yyyy-MM-dd")]}}]);