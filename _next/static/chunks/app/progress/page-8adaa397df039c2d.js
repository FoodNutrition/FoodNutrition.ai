(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[92],{6130:(e,s,t)=>{Promise.resolve().then(t.bind(t,2500))},2500:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var r=t(2265),a=t(6113),l=t(9322),n=t(4322),c=t(2547),d=t(6728);let i=(0,t(845).Z)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);var x=t(9285),o=t(2875),m=t(7437);function h(e){let{selectedDate:s,onDateClick:t}=e,{data:a}=(0,o.a)(),l=(0,r.useRef)(null),n=Object.keys(a).length;(0,r.useEffect)(()=>{var e;null===(e=l.current)||void 0===e||e.scrollTo({left:l.current.scrollWidth,behavior:"instant"})},[]);let c=n>0?Math.round(Object.values(a).reduce((e,s)=>e+s.rate,0)/n):0;return(0,m.jsxs)("div",{className:"w-full",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)("div",{className:"text-2xl font-bold text-green-600",children:n}),(0,m.jsx)("div",{className:"text-sm text-gray-600",children:"Days Tracked"})]}),(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[c,"%"]}),(0,m.jsx)("div",{className:"text-sm text-gray-600",children:"Avg Adherence"})]}),(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:Object.values(a).filter(e=>e.rate>=80).length}),(0,m.jsx)("div",{className:"text-sm text-gray-600",children:"Excellent Days"})]})]}),(0,m.jsxs)("div",{className:"text-right",children:[(0,m.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Last 365 days"}),(0,m.jsx)("div",{className:"text-xs text-gray-500",children:"Click any square to add data"})]})]}),(0,m.jsx)("div",{className:"overflow-x-auto",ref:l,children:(0,m.jsx)("div",{className:"min-w-[900px] p-4",children:(0,m.jsx)(x.B,{simpleColors:!1,selectedDate:s,maxDays:365,size:"lg",onDateClick:e=>t(new Date(e)),showLabel:!0})})}),(0,m.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200 mx-4",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,m.jsx)("span",{className:"text-xs text-gray-500",children:"Less"}),(0,m.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,m.jsx)("div",{className:"w-3 h-3 bg-gray-200 border border-gray-300 rounded-sm"}),(0,m.jsx)("div",{className:"w-3 h-3 bg-red-200 border border-red-300 rounded-sm"}),(0,m.jsx)("div",{className:"w-3 h-3 bg-orange-200 border border-orange-300 rounded-sm"}),(0,m.jsx)("div",{className:"w-3 h-3 bg-yellow-200 border border-yellow-300 rounded-sm"}),(0,m.jsx)("div",{className:"w-3 h-3 bg-green-200 border border-green-300 rounded-sm"}),(0,m.jsx)("div",{className:"w-3 h-3 bg-green-400 border border-green-500 rounded-sm"})]}),(0,m.jsx)("span",{className:"text-xs text-gray-500",children:"More"})]}),(0,m.jsx)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:(0,m.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,m.jsx)("div",{className:"w-3 h-3 rounded-sm ring-2 ring-blue-500"}),(0,m.jsxs)("span",{className:"ps-1 pt-0.5",children:["Selected ",(0,m.jsx)("span",{className:"hidden md:inline-block",children:"day"})]})]})})]})]})}var j=t(175),u=t(630),N=t(4853),f=t(8722);function b(){let e=(0,j._)();console.log("danasnji dan",e);let{0:s,1:t}=(0,r.useState)(e),{data:x,isLoaded:b,loadData:g}=(0,o.a)();(0,r.useEffect)(()=>{b||g()},[]);let v=()=>{let s=0;for(;;){var t;let r=(0,o.m)(x,e);if(r&&(null==r||null===(t=r.messages)||void 0===t?void 0:t.length)>0)s++,e.setDate(e.getDate()-1);else break}return s},p=()=>{let e={};Object.entries(x).forEach(s=>{let[t,r]=s,a=t.substring(0,7);e[a]||(e[a]=[]),e[a].push(r.rate)});let s="",t=0;return Object.entries(e).forEach(e=>{let[r,a]=e,l=a.reduce((e,s)=>e+s,0)/a.length;l>t&&(t=l,s=r)}),s?new Date(s+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"}):"N/A"},y=(()=>{let e=Object.values(x),s=e.length,t=s>0?e.reduce((e,s)=>e+s.rate,0)/s:0;return{totalDays:s,avgAdherence:Math.round(t),streak:v(),bestMonth:p()}})(),w=(0,r.useMemo)(()=>{var e,t;return s&&null!==(e=null===(t=(0,o.m)(x,new Date(s)))||void 0===t?void 0:t.rate)&&void 0!==e?e:0},[x,s]),k=(0,r.useMemo)(()=>{var e,t;return s&&null!==(e=null===(t=(0,o.m)(x,new Date(s)))||void 0===t?void 0:t.messages)&&void 0!==e?e:[]},[x,s]);return(0,m.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50",children:[(0,m.jsx)(f._,{}),(0,m.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[(0,m.jsxs)("div",{className:"text-center mb-8",children:[(0,m.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Progress Tracker"}),(0,m.jsx)("p",{className:"text-lg text-gray-600",children:"Track your nutrition journey and visualize your progress over time"})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,m.jsxs)(l.Zb,{children:[(0,m.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,m.jsx)(l.ll,{className:"text-sm font-medium",children:"Total Days Tracked"}),(0,m.jsx)(n.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,m.jsx)(l.aY,{children:(0,m.jsx)("div",{className:"text-2xl font-bold text-green-600",children:y.totalDays})})]}),(0,m.jsxs)(l.Zb,{children:[(0,m.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,m.jsx)(l.ll,{className:"text-sm font-medium",children:"Average Adherence"}),(0,m.jsx)(c.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,m.jsx)(l.aY,{children:(0,m.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[y.avgAdherence,"%"]})})]}),(0,m.jsxs)(l.Zb,{children:[(0,m.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,m.jsx)(l.ll,{className:"text-sm font-medium",children:"Current Streak"}),(0,m.jsx)(d.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,m.jsx)(l.aY,{children:(0,m.jsxs)("div",{className:"text-2xl font-bold text-orange-600",children:[y.streak," days"]})})]}),(0,m.jsxs)(l.Zb,{children:[(0,m.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,m.jsx)(l.ll,{className:"text-sm font-medium",children:"Best Month"}),(0,m.jsx)(i,{className:"h-4 w-4 text-muted-foreground"})]}),(0,m.jsx)(l.aY,{children:(0,m.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:y.bestMonth})})]})]}),(0,m.jsxs)(l.Zb,{className:"mb-8",children:[(0,m.jsxs)(l.Ol,{children:[(0,m.jsx)(l.ll,{children:"Nutrition Tracking Heatmap"}),(0,m.jsx)(l.SZ,{children:"Click on any date to add or edit your nutrition data. Colors represent adherence to your nutrition goals."})]}),(0,m.jsx)(l.aY,{children:(0,m.jsx)(h,{selectedDate:s,onDateClick:e=>{t(e),setTimeout(()=>{window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},100)}})})]}),(0,m.jsxs)(l.Zb,{className:"mb-8",children:[(0,m.jsx)(l.Ol,{children:(0,m.jsx)(l.ll,{children:"Legend"})}),(0,m.jsx)(l.aY,{children:(0,m.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,m.jsx)("div",{className:"w-4 h-4 bg-gray-200 rounded"}),(0,m.jsx)("span",{className:"text-sm",children:"No data"})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,m.jsx)("div",{className:"w-4 h-4 bg-red-200 rounded"}),(0,m.jsx)("span",{className:"text-sm",children:"Poor (0-40%)"})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,m.jsx)("div",{className:"w-4 h-4 bg-yellow-200 rounded"}),(0,m.jsx)("span",{className:"text-sm",children:"Fair (41-60%)"})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,m.jsx)("div",{className:"w-4 h-4 bg-green-200 rounded"}),(0,m.jsx)("span",{className:"text-sm",children:"Good (61-80%)"})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,m.jsx)("div",{className:"w-4 h-4 bg-green-400 rounded"}),(0,m.jsx)("span",{className:"text-sm",children:"Excellent (81-100%)"})]})]})})]}),s&&(0,m.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,m.jsx)("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50/50",children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),(0,m.jsx)("p",{className:"text-sm text-gray-600 mt-1 hidden md:block",children:"Your nutrition conversations from this day"})]}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("span",{className:"text-gray-600 p-2 font-semibold rounded-lg ".concat((0,N.z)(w)),children:["Rate:"," ",(0,m.jsxs)("span",{className:"font-bold ",children:[w," %"]})]}),(0,m.jsx)(a.z,{variant:"ghost",size:"sm",onClick:()=>t(null),className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full w-8 h-8 p-0",children:"âœ•"})]})]})}),(0,m.jsx)("div",{className:"px-6 py-6",children:k.length>0?(0,m.jsx)("div",{className:"space-y-6 max-h-[600px] overflow-y-auto",children:(0,m.jsx)(u.r,{messages:k})}):(0,m.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,m.jsx)(n.Z,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),(0,m.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No conversations found"}),(0,m.jsx)("p",{className:"text-sm",children:"No chat history found for this date"}),(0,m.jsx)("p",{className:"text-sm",children:"Start a conversation about your nutrition to see it here!"})]})}),(0,m.jsx)("div",{className:"px-6 py-4 border-t border-gray-100 bg-gray-50/30",children:(0,m.jsx)("div",{className:"text-center",children:(0,m.jsx)("p",{className:"text-xs text-gray-500",children:"NutriAI can make mistakes. Check important nutrition info."})})})]})]})]})}},8722:(e,s,t)=>{"use strict";t.d(s,{_:()=>d});var r=t(991);let a=(0,t(845).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var l=t(5343),n=t(6113),c=t(7437);function d(){return(0,c.jsx)("header",{className:"border-b bg-white/80 backdrop-blur-sm sticky top-0 z-50",children:(0,c.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)(l.default,{href:"/",className:"flex items-center space-x-2",children:[(0,c.jsx)(r.Z,{className:"h-8 w-8 text-green-600"}),(0,c.jsx)("span",{className:"text-xl font-semibold text-gray-900",children:"Food Nutrition AI"})]}),(0,c.jsx)(n.z,{variant:"ghost",asChild:!0,children:(0,c.jsxs)(l.default,{href:"/chat",className:"flex items-center space-x-2",children:[(0,c.jsx)(a,{className:"h-4 w-4"}),(0,c.jsx)("span",{children:"Back to Chat"})]})})]})})})}},9322:(e,s,t)=>{"use strict";t.d(s,{Ol:()=>f,SZ:()=>g,Zb:()=>N,aY:()=>v,ll:()=>b});var r=t(665),a=t(2469),l=t(2265),n=t(7431),c=t(7437);let d=["className"],i=["className"],x=["className"],o=["className"],m=["className"],h=["className"];function j(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,r)}return t}function u(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{};s%2?j(Object(t),!0).forEach(function(s){(0,r.Z)(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}let N=l.forwardRef((e,s)=>{let{className:t}=e,r=(0,a.Z)(e,d);return(0,c.jsx)("div",u({ref:s,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",t)},r))});N.displayName="Card";let f=l.forwardRef((e,s)=>{let{className:t}=e,r=(0,a.Z)(e,i);return(0,c.jsx)("div",u({ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t)},r))});f.displayName="CardHeader";let b=l.forwardRef((e,s)=>{let{className:t}=e,r=(0,a.Z)(e,x);return(0,c.jsx)("div",u({ref:s,className:(0,n.cn)("font-semibold leading-none tracking-tight",t)},r))});b.displayName="CardTitle";let g=l.forwardRef((e,s)=>{let{className:t}=e,r=(0,a.Z)(e,o);return(0,c.jsx)("div",u({ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t)},r))});g.displayName="CardDescription";let v=l.forwardRef((e,s)=>{let{className:t}=e,r=(0,a.Z)(e,m);return(0,c.jsx)("div",u({ref:s,className:(0,n.cn)("p-6 pt-0",t)},r))});v.displayName="CardContent",l.forwardRef((e,s)=>{let{className:t}=e,r=(0,a.Z)(e,h);return(0,c.jsx)("div",u({ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t)},r))}).displayName="CardFooter"}},e=>{var s=s=>e(e.s=s);e.O(0,[909,645,510,794,130,427,744],()=>s(6130)),_N_E=e.O()}]);