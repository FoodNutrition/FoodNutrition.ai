(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91],{7701:(e,t,s)=>{Promise.resolve().then(s.bind(s,1539))},1539:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>W});var a=s(2265),n=s(6728),l=s(6113),r=s(4322),i=s(5343),o=s(9285),c=s(7437);function d(){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{className:"font-medium text-sm px-3 py-1",children:(0,c.jsx)("div",{className:"flex items-center justify-center mb-8 h-full ",children:(0,c.jsx)(l.z,{variant:"custom",asChild:!0,className:"flex items-center h-full space-x-4 px-4 py-3 bg-gray-50/50 hover:bg-gray-100 text-blue-600 hover:text-blue-800 rounded-lg border border-gray-200/50",children:(0,c.jsxs)(i.default,{href:"/progress",children:[(0,c.jsx)("div",{className:"flex items-center space-x-2",children:(0,c.jsx)(r.Z,{className:"h-4 w-4"})}),(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)(o.B,{}),(0,c.jsx)("span",{className:"font-medium text-sm px-3 py-1",children:"View →"})]})]})})})})})}var m=s(665),x=s(2469),h=s(5526),u=s(8934),p=s(7431);let f=["className"],g=["className","children"],j=["className"],y=["className"],v=["className"];function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function w(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach(function(t){(0,m.Z)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}let N=h.fC;h.xz;let k=h.h_;h.x8;let z=a.forwardRef((e,t)=>{let{className:s}=e,a=(0,x.Z)(e,f);return(0,c.jsx)(h.aV,w({ref:t,className:(0,p.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s)},a))});z.displayName=h.aV.displayName;let I=a.forwardRef((e,t)=>{let{className:s,children:a}=e,n=(0,x.Z)(e,g);return(0,c.jsxs)(k,{children:[(0,c.jsx)(z,{}),(0,c.jsxs)(h.VY,w(w({ref:t,className:(0,p.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s)},n),{},{children:[a,(0,c.jsxs)(h.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,c.jsx)(u.Z,{className:"h-4 w-4"}),(0,c.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});I.displayName=h.VY.displayName;let C=e=>{let{className:t}=e,s=(0,x.Z)(e,j);return(0,c.jsx)("div",w({className:(0,p.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t)},s))};C.displayName="DialogHeader";let O=a.forwardRef((e,t)=>{let{className:s}=e,a=(0,x.Z)(e,y);return(0,c.jsx)(h.Dx,w({ref:t,className:(0,p.cn)("text-lg font-semibold leading-none tracking-tight",s)},a))});O.displayName=h.Dx.displayName;let S=a.forwardRef((e,t)=>{let{className:s}=e,a=(0,x.Z)(e,v);return(0,c.jsx)(h.dk,w({ref:t,className:(0,p.cn)("text-sm text-muted-foreground",s)},a))});S.displayName=h.dk.displayName;var E=s(991),Z=s(1140);function P(e){let{isOpen:t,onClose:s}=e,{0:n,1:r}=(0,a.useState)(null),o=async()=>{r("google");try{await new Promise(e=>setTimeout(e,2e3)),console.log("Google login initiated"),s()}catch(e){console.error("Google login failed:",e)}finally{r(null)}};return(0,c.jsx)(N,{open:t,onOpenChange:s,children:(0,c.jsxs)(I,{className:"sm:max-w-md",children:[(0,c.jsxs)(C,{children:[(0,c.jsx)("div",{className:"flex items-center justify-between",children:(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)("div",{className:"w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center",children:(0,c.jsx)(E.Z,{className:"h-5 w-5 text-white"})}),(0,c.jsx)(O,{className:"text-xl font-semibold",children:"Welcome to Food Nutrition AI"})]})}),(0,c.jsx)(S,{className:"text-center pt-2",children:"Sign in to start your personalized nutrition journey"})]}),(0,c.jsx)("div",{className:"space-y-4 pt-1",children:(0,c.jsx)(l.z,{onClick:o,disabled:null!==n,className:"w-full h-12 bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 shadow-sm",variant:"outline",asChild:!0,children:(0,c.jsxs)(i.default,{href:"".concat("https://foodnutrition-ai-backend.vercel.app/","auth/google"),children:["google"===n?(0,c.jsx)(Z.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,c.jsxs)("svg",{className:"mr-3 h-5 w-5",viewBox:"0 0 24 24",children:[(0,c.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,c.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,c.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,c.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"google"===n?"Signing in...":"Continue with Google"]})})}),(0,c.jsx)("div",{className:"pt-1 text-center",children:(0,c.jsxs)("p",{className:"text-xs text-gray-500",children:["By continuing, you agree to our"," ",(0,c.jsx)("a",{href:"#",className:"text-green-600 hover:underline",children:"Terms of Service"})," ","and"," ",(0,c.jsx)("a",{href:"#",className:"text-green-600 hover:underline",children:"Privacy Policy"})]})})]})})}var D=s(1083),L=s(2547),_=s(5733),B=s(1398),M=s(1426),V=s(9113);function R(e){let{input:t,isLoading:s,handleSubmit:n,setInput:r}=e,i=(0,a.useRef)(null),o=(0,D.tN)(e=>e.authenticated),{0:d,1:m}=(0,a.useState)(!1),x=()=>{null!=i&&i.current&&(i.current.style.height="auto",i.current.style.height="".concat(i.current.scrollHeight,"px"))};(0,a.useEffect)(()=>(window.addEventListener("resize",x),()=>{window.removeEventListener("resize",x)}),[]),(0,a.useEffect)(()=>{x()},[t]);let h=e=>{r(e),null!=i&&i.current&&(null==i||i.current.focus())},u=t.trim().length>3&&t.trim().length<500,p=e=>{e.preventDefault(),u&&(o?n():(localStorage.setItem("saved_promt",t),m(!0)))};return(0,c.jsxs)("form",{onSubmit:p,children:[(0,c.jsxs)("div",{className:"relative border focus-within:border-transparent shadow-sm p-4 border-gray-300 rounded-3xl focus-within:outline-none focus-within:ring-2 focus-within:ring-green-500",children:[(0,c.jsx)("textarea",{ref:i,className:"w-full min-h-[40px] max-h-[240px] text-base resize-none overflow-y-auto border-none focus:outline-none focus:ring-0 focus:border-none",onChange:e=>{r(e.currentTarget.value)},value:t,placeholder:"Tell me about yourself: age, weight, height, activity level, goals, dietary restrictions...",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),p(e))},rows:1}),(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-1 md:space-x-2 overflow-x-auto",children:[(0,c.jsxs)(l.z,{type:"button",variant:"ghost",size:"sm",className:"h-7 md:h-8 px-2 md:px-3 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-full border-0 whitespace-nowrap",onClick:()=>h("I'm a 29-year-old female, 68kg, 165cm. I have a moderately active lifestyle and want to lose 5-7kg in the next 3 months. I enjoy balanced meals and prefer simple recipes."),children:[(0,c.jsx)(L.Z,{className:"h-3 w-3 mr-1"}),(0,c.jsx)("span",{className:"hidden sm:inline",children:"Weight Loss"}),(0,c.jsx)("span",{className:"sm:hidden",children:"Loss"})]}),(0,c.jsxs)(l.z,{type:"button",variant:"ghost",size:"sm",className:"h-7 md:h-8 px-2 md:px-3 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-full border-0 whitespace-nowrap",onClick:()=>h("I'm a 34-year-old female, 62kg, 168cm. I do strength training twice a week and want to improve muscle tone. I prefer balanced, nutrient-dense meals and easy prep."),children:[(0,c.jsx)(_.Z,{className:"h-3 w-3 mr-1"}),(0,c.jsx)("span",{className:"hidden sm:inline",children:"Muscle Gain"}),(0,c.jsx)("span",{className:"sm:hidden",children:"Muscle"})]}),(0,c.jsxs)(l.z,{type:"button",variant:"ghost",size:"sm",className:"h-7 md:h-8 px-2 md:px-3 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-full border-0 whitespace-nowrap",onClick:()=>h("I'm a 38-year-old male, 78kg, 180cm. I'm a vegetarian who cycles to work daily. I want meals high in protein and iron, with easy-to-find ingredients."),children:[(0,c.jsx)(B.Z,{className:"h-3 w-3 mr-1"}),(0,c.jsx)("span",{className:"hidden sm:inline",children:"Vegetarian"}),(0,c.jsx)("span",{className:"sm:hidden",children:"Veg"})]}),(0,c.jsxs)(l.z,{type:"button",variant:"ghost",size:"sm",className:"h-7 md:h-8 px-2 md:px-3 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-full border-0 whitespace-nowrap",onClick:()=>h("I'm a 31-year-old female, 65kg, 170cm. I work long hours and want healthy meals I can prep for the week. I prefer quick recipes with minimal ingredients."),children:[(0,c.jsx)(M.Z,{className:"h-3 w-3 mr-1"}),(0,c.jsx)("span",{className:"hidden sm:inline",children:"Meal Prep"}),(0,c.jsx)("span",{className:"sm:hidden",children:"Prep"})]})]}),(0,c.jsx)(l.z,{type:"submit",disabled:!u||s,className:"bg-green-600 hover:bg-green-700 text-white p-1.5 md:p-2 rounded-lg h-7 w-7 md:h-8 md:w-8 ml-2",children:(0,c.jsx)(V.Z,{className:"w-3 h-3 md:w-4 md:h-4"})})]})]}),(0,c.jsx)(P,{isOpen:d,onClose:()=>m(!1)})]})}function T(){return(0,c.jsxs)("div",{className:"text-center mb-6",children:[(0,c.jsxs)("span",{className:"text-4xl font-semibold text-gray-900 mb-2 flex items-center justify-center gap-2",children:[(0,c.jsx)(E.Z,{className:"h-8 w-8 text-green-600"}),(0,c.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Food Nutrition AI"})]}),(0,c.jsx)("p",{className:"text-gray-600",children:"Your personal AI nutrition coach"})]})}function H(e){let{input:t,isLoading:s,handleSubmit:a,setInput:l}=e;return(0,c.jsx)("div",{className:" bg-white",children:(0,c.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-80px)] px-4",children:(0,c.jsxs)("div",{className:"w-full max-w-3xl",children:[(0,c.jsx)(T,{}),(0,c.jsxs)("div",{className:"mb-8 flex flex-col",children:[(0,c.jsx)(d,{}),(0,c.jsx)(R,{input:t,isLoading:s,handleSubmit:a,setInput:l})]}),(0,c.jsx)("div",{className:"text-center",children:(0,c.jsxs)("div",{className:"inline-flex items-center space-x-2 px-4 py-2 bg-gray-50 rounded-full text-sm text-gray-600",children:[(0,c.jsx)(n.Z,{className:"h-4 w-4 text-blue-500"}),(0,c.jsx)("span",{children:"Get personalized nutrition plans with visual progress tracking"})]})})]})})})}var F=s(175),A=s(2875),G=s(630);function Y(e){let{input:t,isLoading:s,handleSubmit:n,setInput:l}=e,r=(0,F._)(),d=(0,a.useRef)(null),m=(0,a.useRef)(null),{0:x,1:h}=(0,a.useState)(0),{0:u,1:p}=(0,a.useState)(0),{isLoaded:f,data:g}=(0,A.a)(),j=(0,a.useMemo)(()=>{var e,t;return null!==(e=null===(t=(0,A.m)(g,r))||void 0===t?void 0:t.messages)&&void 0!==e?e:[]},[g,r]),y=(0,a.useMemo)(()=>!!(0,A.m)(g,r),[g,r]);(0,a.useEffect)(()=>{let e=0;for(let s=j.length;s>=0;s-=1){var t;if((null===(t=j[s])||void 0===t?void 0:t.role)==="user"){e=s;break}}let s=document.getElementById("message-".concat(e));s&&s.scrollIntoView({behavior:"smooth"})},[j]);let v=(0,a.useCallback)(()=>{var e,t,s,a;let n=null!==(e=null==d||null===(t=d.current)||void 0===t?void 0:t.getBoundingClientRect().height)&&void 0!==e?e:0,l=null!==(s=null==m||null===(a=m.current)||void 0===a?void 0:a.getBoundingClientRect().height)&&void 0!==s?s:0;h(n),p(l)},[]);return((0,a.useLayoutEffect)(()=>(window.addEventListener("resize",v),v(),()=>{window.removeEventListener("resize",v)}),[y]),f)?(0,c.jsxs)("div",{className:"min-h-screen relative",children:[(0,c.jsx)("div",{id:"test",ref:d,className:"fixed w-full top-0 px-6 py-4 border-b border-gray-100 bg-gray-50 ",children:(0,c.jsxs)("div",{className:" max-w-4xl flex flex-col md:flex-row gap-2 items-center justify-between m-auto",children:[(0,c.jsx)("div",{className:"items-center justify-between flex",children:(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"text-lg font-semibold text-gray-900 text-center md:text-left",children:r.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,c.jsx)("p",{className:"text-sm text-gray-600 mt-1 text-center md:text-left",children:"Your nutrition conversations from this day"})]})}),(0,c.jsxs)(i.default,{href:"/progress",className:"flex justify-center items-center text-blue-600 hover:text-blue-800",children:[(0,c.jsx)(o.B,{}),(0,c.jsxs)("span",{className:"font-medium text-sm px-3 py-1 flex items-center",children:[(0,c.jsx)("span",{className:"hidden md:flex",children:"View"})," →"]})]})]})}),(0,c.jsxs)("div",{className:"bg-white flex flex-col max-w-4xl m-auto",children:[j.length>0?(0,c.jsx)("div",{className:"space-y-6 flex-1 px-6 py-6 overflow-y-auto",style:{paddingTop:"".concat(x+20,"px"),paddingBottom:"".concat(u+20,"px")},children:(0,c.jsx)(G.r,{messages:j,isLoading:s,headerHeight:x})}):(0,c.jsx)("div",{className:"h-screen p-0 m-0 flex justify-center items-center text-gray-500",children:(0,c.jsx)(T,{})}),(0,c.jsx)("div",{ref:m,className:"fixed bottom-0 w-full px-6 py-2 pb-3 bg-white",children:(0,c.jsx)("div",{className:" max-w-4xl",children:(0,c.jsx)(R,{input:t,isLoading:s,handleSubmit:n,setInput:l})})})]})," "]}):null}var K=s(1545);function W(){let{isLoaded:e,data:t,addMessage:s,loadData:n,getHistory:l}=(0,A.a)(),r=(0,F._)(),{0:i,1:o}=(0,a.useState)(""),{0:d,1:m}=(0,a.useState)(!1);(0,a.useEffect)(()=>{e||n()},[]),(0,a.useEffect)(()=>{if(!e)return;let t=localStorage.getItem("saved_promt");t?(localStorage.removeItem("saved_promt"),setTimeout(()=>{h(t)},300)):setTimeout(()=>{window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})},300)},[e]);let x=(0,a.useMemo)(()=>(0,A.m)(t,r),[t,r]),h=async e=>{m(!0);let t=l(),a=new Date,n=null!=e?e:i;s(r,{role:"user",parts:[{text:n}],timestamp:a}),o(""),s(r,{role:"model",parts:[{text:(await K.Z.post("ai/nutrition",{history:t,message:n,timestamp:a})).data.message}],timestamp:new Date}),m(!1)};return e?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:(0,p.cn)("hidden md:hidden",!x&&"md:block"),children:(0,c.jsx)(H,{input:i,isLoading:d,handleSubmit:h,setInput:o})}),(0,c.jsx)("span",{className:(0,p.cn)("block md:hidden",x&&"md:block"),children:(0,c.jsx)(Y,{input:i,isLoading:d,handleSubmit:h,setInput:o})})]}):null}}},e=>{var t=t=>e(e.s=t);e.O(0,[739,909,978,435,82,794,130,427,744],()=>t(7701)),_N_E=e.O()}]);